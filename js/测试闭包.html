<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <ul>
    <li>i</li>
    <li>i</li>
    <li>i</li>
    <li>i</li>
  </ul>

  <script>
    // 打印 4 4 4 4
    var elements = document.getElementsByTagName('li');
    for (var i = 0; i < elements.length; i++) {
      setTimeout(() => {
        console.log(i);
      }, 100);
    }

    // 闭包解决   打印 0 1 2 3
    var elements = document.getElementsByTagName('li');  
    for (var i = 0; i < elements.length; i++) {  
      (function(index) {  
        setTimeout(function() {  
          console.log(index);  
        }, 100);
      })(i);
    }

    //    打印 0 1 2 3  
    // 使用let,  i 在每次循环迭代中都有自己独立的块级作用域  每次迭代中都会创建一个新的绑定，并且这个绑定只在当前迭代中有效 
    var elements = document.getElementsByTagName('li');
    for (let i = 0; i < elements.length; i++) {
      setTimeout(() => {
        console.log(i);
      }, 100);
    }

    // 闭包经典
    function add(){
        var a=0;
        return function add1(){
            a++;
            console.log(a);
        }
    }
    const res = add();
    res();
    res();
    res();

  </script>
</body>
</html>